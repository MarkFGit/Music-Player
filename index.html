<DOCTYPE! html>
<html>
<head>
<title> Music </title>
<script src="script.js"></script>
<link rel="stylesheet" href="style.css" />
</head>

<body onload="createTable()">
	<div class="container">
		<div class="content">
			<div id="navBar">
				<h3>NavBar!</h3>
				<ul> <!-- Unordered list -->
					<li class="active"><a href="#">Home</a></li>
					<li><a href="#">Playlists</a></li>
					<li><a href="#">Artists</a></li>
				</ul>
			</div>
			<div class="centerBox">
				<p>Click here to listen</p>
				<div id = "seekBar">
					<div id = "fill"></div>
					<div id = "handlef"></div>
				</div>
				<table id="songTable"> </table>
			</div>
		</div>
	</div>
	<audio id="song1">
		<source src="media/1.mp3" type="audio/mp3">
	</audio>
	<audio id="song2">
		<source src="media/2.mp3" type="audio/mp3">
	</audio>
	<script>

		function createTable(){
			var table = document.getElementById("songTable");
			table.setAttribute('id','table');
			for(var songCount = 1; songCount <= 5; songCount++){ /*Songs*/
				//var row = table.insertRow(0);
				//var cell1 = row.insertCell(0);
				//cell1.innerHTML = "NEW CELL"; 
				addRow(songCount);
			}
		}

		function addRow(songCount){
			let tr = table.insertRow(-1);
			let td = tr.insertCell(0);
			let td2 = tr.insertCell(1);

			songTest = new addSongObject(songCount);

			songTest.newImg.addEventListener('click', function foo(){
			//songTest.newImg.onclick = function(){
				let mySong1 = document.getElementById('song1');
				mySong1.setAttribute('type','audio/mp3');
				mySong1.setAttribute('src', 'media/'+songCount.toString()+'.mp3');
				var position = songTest.song.currentTime / songTest.song.duration;
				songTest.song.addEventListener('timeupdate', function foo2(){
					position = songTest.song.currentTime / songTest.song.duration;
					fill.style.width = position *  100 + '%';
					handlef.style.marginLeft = 100 * position + '%';
					//songTest.newText = document.createTextNode(position);
					if(position == 1){
						songTest.newImg.src = "media/play.png";
						position = 0;
						fill.style.width = 0 + '%';
						handlef.style.marginLeft = 0 + '%';
					}
				});
				if(songTest.newImg.src == "file:///C:/Users/markr/Desktop/Website/media/play.png"){//mySong1.paused){
					songTest.song.play();
					//mySong1.currentTime = position;// * mySong1.duration;
					songTest.newImg.src = "media/pause.png";
				}
				else{
					songTest.song.pause();
					songTest.newImg.src = "media/play.png";
				}
			});
			
			//var newText = document.createElement('text');
			//newText.setAttribute('type','text');
			//newText.setAttribute('value', 'hi');
			//td.appendChild(newText);
			td.appendChild(songTest.newImg);
			//let newText = document.createElement('text');
			//newText.setAttribute('value','hi');
			//td2.appendChild(newText);
			td2.appendChild(songTest.newText);

		}

		function addSongObject(songCount){
			this.newText = document.createTextNode('media/'+songCount.toString()+'.mp3');

			this.newImg = document.createElement('img');
			this.newImg.setAttribute('id','newImg');//+songCount.toString());
			this.newImg.setAttribute('type','img');
			this.newImg.setAttribute('src','media/play.png');

			this.song = document.createElement('audio');
			this.song.setAttribute('id','song');
			this.song.setAttribute('type','audio/mp3');
			this.song.setAttribute('src', 'media/'+songCount.toString()+'.mp3');

			this.position = this.song.currentTime / this.song.duration;
			//if(songCount == 1){
/*			this.newImg.addEventListener('click',function(){
				//let mySong1 = document.getElementById('song1');
				//mySong1.setAttribute('type','audio/mp3');
				//mySong1.setAttribute('src', 'media/'+songCount.toString()+'.mp3');
				
				this.song.addEventListener('timeupdate', function(){
					this.position = this.song.currentTime / this.song.duration;
					fill.style.width = this.position *  100 + '%';
					handlef.style.marginLeft = 100 * this.position + '%';
					//this.newText = '1';
					//songTest.newText = document.createTextNode(position);
					if(position == 1){
						this.newImg.src = "media/play.png";
						//position = 0;
						fill.style.width = 0 + '%';
						handlef.style.marginLeft = 0 + '%';
					}
				});
				if(this.newImg.src == "file:///C:/Users/markr/Desktop/Website/media/play.png"){//mySong1.paused){
					this.song.play();
					//mySong1.currentTime = position;// * mySong1.duration;
					this.newImg.src = "media/pause.png";
				}
				else{
					this.song.pause();
					this.newImg.src = "media/play.png";
				}
			});*/

		}


		function playSong(){


		}
		//function newSound(songCount){
			//this.type = ''
			//this.src = 'media/'+songCount.toString()+'.mp3';

			//return this;
		//}


		//Wants:
			//multiple pages to select from, ex: home, playlists, artists
			//volume slider
			//song slider (select where you want to be in song)
			//back and forth buttons
			//need to fix such that only one song is "playing" at once

	</script>
	<!--h1>Hello World!</h1-->
	<!--button onclick="revealMessage()">Click me</button-->
	<!--p id="hiddenMessage" style="display:none">You are going to die</p-->
</body>
</html>

<!-- 			//var row = table.insertRow(-1);
			//var cell1 = row.insertCell(0);

			//cell1.innerHTML = '1'; 
			//cell1.appendChild('text');
			//var tablz = document.getElementById('songTable');
			//song = new newSong(songCount);
			
/*			var sound = document.createElement('audio');
			sound.id = "audio-player";
			//sound.controls = controls;
			sound.src = 'media/'+songCount.toString()+'.mp3';
			sound.type = 'audio/mp3';
			mySong1 = document.getElementById('song1').appendChild(sound);*/

			//mySong1 = document.getElementById('mySong1').insertAdjacentHTML('','<audio id="audio-player" src="media/Blue Browne.mp3" type="audio/mpeg">'); -->



<!-- 				//var row = document.createElement('tr');
				//var image = document.getElementById("icon");
			    //var row = table.insertRow(songCount);
    			//var cell1 = row.insertCell(0);
    			//var cell2 = row.insertCell(1);
    			//var cell3 = row.insertCell(2);

    			//var imgTest = document.createElement("imgTest");
    			//imgTest.src = "media/1.mp3";
    			//icon.src = "media/pause.png";
    			//cell1.appendChild("hi");
    			//cell2.appendChild("hi");
    			//table.insertRow(row);
    			//var toString = songCount.toString();
    			
    			//cell1.appendChild(icon);
    			//cell2.appendChild(icon2);

    			//cell1.appendChild(document.getElementById("test"+songCount.toString()));
    			//cell1.appendChild(image);
/*    			if(songCount==0){
    				cell1.appendChild(icon);
    			}
    			if(songCount == 1){
    				cell1.appendChild(icon2);
    			}*/
				//let newRow = table.insertRow(songCount);
				//newRow.appendChild("hi");
				//table.appendChild(row); -->